<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Payment Method Configuration</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .payment-method { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .field-item { background: #f5f5f5; margin: 5px 0; padding: 10px; border-radius: 3px; }
        .btn { padding: 8px 15px; margin: 5px; border: none; border-radius: 3px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .form-group { margin: 10px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 3px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 5% auto; padding: 20px; width: 80%; max-width: 500px; border-radius: 5px; }
        .close { float: right; font-size: 20px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Payment Method Configuration (Admin)</h1>
        <p><strong>This demo shows how admins can configure payment methods with custom fields</strong></p>
        
        <div id="paymentMethods">
            <div class="payment-method">
                <h3>GCash</h3>
                <p>Status: <span style="color: green;">Enabled</span></p>
                <p><strong>Custom Fields:</strong></p>
                <div id="gcash-fields">
                    <em>No custom fields configured yet</em>
                </div>
                <button class="btn btn-primary" onclick="openAddFieldModal('gcash')">Add Custom Field</button>
            </div>
            
            <div class="payment-method">
                <h3>Bank Transfer</h3>
                <p>Status: <span style="color: red;">Disabled</span></p>
                <button class="btn btn-success" onclick="enablePaymentMethod('bank_transfer')">Enable Payment Method</button>
            </div>
            
            <div class="payment-method">
                <h3>Credit Card</h3>
                <p>Status: <span style="color: red;">Disabled</span></p>
                <button class="btn btn-success" onclick="enablePaymentMethod('credit_card')">Enable Payment Method</button>
            </div>
        </div>
        
        <h2>How It Works</h2>
        <ol>
            <li><strong>Admin configures payment methods</strong> - Enable/disable payment options</li>
            <li><strong>Admin adds custom fields</strong> - For each payment method, specify what information students must provide</li>
            <li><strong>Student sees dynamic form</strong> - Based on admin configuration, students see different fields for different payment methods</li>
            <li><strong>No more hardcoded uploads!</strong> - Everything is configurable by admin</li>
        </ol>
        
        <h3>Example Configurations:</h3>
        <ul>
            <li><strong>GCash:</strong> Reference Number (text), Screenshot (file)</li>
            <li><strong>Bank Transfer:</strong> Bank Name (select), Account Number (text), Receipt (file)</li>
            <li><strong>Credit Card:</strong> Transaction ID (text), Authorization Code (text)</li>
        </ul>
    </div>

    <!-- Add Field Modal -->
    <div id="addFieldModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3>Add Custom Field</h3>
            <form id="fieldForm">
                <div class="form-group">
                    <label>Field Label:</label>
                    <input type="text" id="fieldLabel" placeholder="e.g., Reference Number" required>
                </div>
                <div class="form-group">
                    <label>Field Type:</label>
                    <select id="fieldType" onchange="toggleOptions()">
                        <option value="text">Text Input</option>
                        <option value="number">Number Input</option>
                        <option value="date">Date Input</option>
                        <option value="file">File Upload</option>
                        <option value="textarea">Text Area</option>
                        <option value="select">Dropdown Select</option>
                    </select>
                </div>
                <div class="form-group" id="optionsGroup" style="display: none;">
                    <label>Options (one per line):</label>
                    <textarea id="fieldOptions" placeholder="Option 1&#10;Option 2&#10;Option 3"></textarea>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="isRequired" checked> Required Field
                    </label>
                </div>
                <button type="button" class="btn btn-primary" onclick="addField()">Add Field</button>
                <button type="button" class="btn" onclick="closeModal()">Cancel</button>
            </form>
        </div>
    </div>

    <script>
        let currentPaymentMethod = '';
        
        function openAddFieldModal(paymentMethod) {
            currentPaymentMethod = paymentMethod;
            document.getElementById('addFieldModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('addFieldModal').style.display = 'none';
            document.getElementById('fieldForm').reset();
            document.getElementById('optionsGroup').style.display = 'none';
        }
        
        function toggleOptions() {
            const fieldType = document.getElementById('fieldType').value;
            const optionsGroup = document.getElementById('optionsGroup');
            optionsGroup.style.display = fieldType === 'select' ? 'block' : 'none';
        }
        
        function addField() {
            const label = document.getElementById('fieldLabel').value;
            const type = document.getElementById('fieldType').value;
            const options = document.getElementById('fieldOptions').value;
            const required = document.getElementById('isRequired').checked;
            
            if (!label) {
                alert('Please enter a field label');
                return;
            }
            
            // Add to display
            const fieldsContainer = document.getElementById(currentPaymentMethod + '-fields');
            if (fieldsContainer.innerHTML.includes('No custom fields')) {
                fieldsContainer.innerHTML = '';
            }
            
            const fieldDiv = document.createElement('div');
            fieldDiv.className = 'field-item';
            fieldDiv.innerHTML = `
                <strong>${label}</strong> 
                <span style="color: #666;">(${type})</span>
                ${required ? '<span style="color: red;">*</span>' : ''}
                ${type === 'select' && options ? `<br><small>Options: ${options.replace(/\n/g, ', ')}</small>` : ''}
                <button class="btn btn-danger btn-sm" onclick="this.parentElement.remove()" style="float: right; padding: 2px 8px;">Remove</button>
            `;
            fieldsContainer.appendChild(fieldDiv);
            
            // Here you would normally send this to your Laravel backend
            console.log('Adding field:', { paymentMethod: currentPaymentMethod, label, type, options, required });
            
            closeModal();
            alert('Field added! This would be saved to the database in the real system.');
        }
        
        function enablePaymentMethod(method) {
            alert(`Enabling ${method} payment method...`);
            // Here you would send to Laravel backend to enable the payment method
        }
        
        // Sample data to show what fields might look like
        setTimeout(() => {
            // Add sample fields for demo
            const gcashFields = document.getElementById('gcash-fields');
            gcashFields.innerHTML = `
                <div class="field-item">
                    <strong>Reference Number</strong> <span style="color: #666;">(text)</span> <span style="color: red;">*</span>
                    <button class="btn btn-danger btn-sm" onclick="this.parentElement.remove()" style="float: right; padding: 2px 8px;">Remove</button>
                </div>
                <div class="field-item">
                    <strong>Payment Screenshot</strong> <span style="color: #666;">(file)</span> <span style="color: red;">*</span>
                    <button class="btn btn-danger btn-sm" onclick="this.parentElement.remove()" style="float: right; padding: 2px 8px;">Remove</button>
                </div>
            `;
        }, 1000);
    </script>
</body>
</html>
