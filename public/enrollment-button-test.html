<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enrollment Button Tenant-Awareness Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container my-5">
        <h1 class="mb-4">🧪 Enrollment Button Tenant-Awareness Test</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>🌐 Regular Enrollment (Non-Tenant)</h5>
                    </div>
                    <div class="card-body">
                        <p>These buttons should go to regular enrollment pages:</p>
                        <a href="http://127.0.0.1:8000/enrollment" class="btn btn-primary me-2">Regular Enrollment</a>
                        <a href="http://127.0.0.1:8000/enrollment/modular" class="btn btn-secondary">Regular Modular</a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>🏢 ARTC Draft Tenant</h5>
                    </div>
                    <div class="card-body">
                        <p>These buttons should go to ARTC draft tenant enrollment:</p>
                        <a href="http://127.0.0.1:8000/t/draft/artc/enrollment" class="btn btn-success me-2">ARTC Draft Enrollment</a>
                        <a href="http://127.0.0.1:8000/t/draft/artc/enrollment/modular" class="btn btn-info">ARTC Draft Modular</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>🚀 ARTC Live Tenant</h5>
                    </div>
                    <div class="card-body">
                        <p>These buttons should go to ARTC live tenant enrollment:</p>
                        <a href="http://127.0.0.1:8000/t/artc/enrollment" class="btn btn-warning me-2">ARTC Live Enrollment</a>
                        <a href="http://127.0.0.1:8000/t/artc/enrollment/modular" class="btn btn-danger">ARTC Live Modular</a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>📊 Test Results</h5>
                    </div>
                    <div class="card-body">
                        <div id="testResults">
                            <p class="text-muted">Click buttons to test tenant-awareness...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>🔍 URL Analysis</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>Current URL:</strong> <span id="currentUrl"></span></p>
                        <p><strong>Tenant Context:</strong> <span id="tenantContext"></span></p>
                        <p><strong>Expected Enrollment URL:</strong> <span id="expectedUrl"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Update current URL info
        document.getElementById("currentUrl").textContent = window.location.href;
        
        // Analyze tenant context from URL
        const url = window.location.href;
        const tenantMatch = url.match(/\/t\/(?:draft\/)?([^\/]+)/);
        
        if (tenantMatch) {
            const tenant = tenantMatch[1];
            const isDraft = url.includes("/draft/");
            document.getElementById("tenantContext").textContent = `${tenant} (${isDraft ? "Draft" : "Live"})`;
            
            const enrollmentPath = isDraft ? `/t/draft/${tenant}/enrollment` : `/t/${tenant}/enrollment`;
            document.getElementById("expectedUrl").textContent = `http://127.0.0.1:8000${enrollmentPath}`;
        } else {
            document.getElementById("tenantContext").textContent = "No tenant context";
            document.getElementById("expectedUrl").textContent = "http://127.0.0.1:8000/enrollment";
        }
        
        // Test button click tracking
        document.querySelectorAll("a").forEach(link => {
            link.addEventListener("click", function(e) {
                const results = document.getElementById("testResults");
                const href = this.href;
                const text = this.textContent;
                
                results.innerHTML += `<p class="small">🔗 Clicked: ${text} → ${href}</p>`;
            });
        });
    </script>
</body>
</html>