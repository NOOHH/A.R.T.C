<!DOCTYPE html>
<html>
<head>
    <title>Admin Quiz Generator Test</title>
    <meta name="csrf-token" content="test-token">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Quiz Generator Modal Test</h1>
        
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#testModal">
            Test Modal
        </button>
        
        <div id="debug-info" class="mt-3">
            <h4>Debug Information:</h4>
            <p>Bootstrap loaded: <span id="bootstrap-status">Checking...</span></p>
            <p>Modal element: <span id="modal-status">Checking...</span></p>
            <p>CSRF token: <span id="csrf-status">Checking...</span></p>
        </div>
    </div>

    <!-- Test Modal -->
    <div class="modal fade" id="testModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Test Modal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>If you can see this, the modal is working!</p>
                    <button onclick="testAjax()" class="btn btn-success">Test AJAX Call</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Debug information
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            
            // Check Bootstrap
            const bootstrapStatus = document.getElementById('bootstrap-status');
            if (typeof bootstrap !== 'undefined') {
                bootstrapStatus.textContent = 'YES';
                bootstrapStatus.className = 'text-success';
            } else {
                bootstrapStatus.textContent = 'NO';
                bootstrapStatus.className = 'text-danger';
            }
            
            // Check modal element
            const modalStatus = document.getElementById('modal-status');
            const modalElement = document.getElementById('testModal');
            if (modalElement) {
                modalStatus.textContent = 'FOUND';
                modalStatus.className = 'text-success';
            } else {
                modalStatus.textContent = 'NOT FOUND';
                modalStatus.className = 'text-danger';
            }
            
            // Check CSRF
            const csrfStatus = document.getElementById('csrf-status');
            const csrfToken = document.querySelector('meta[name="csrf-token"]');
            if (csrfToken) {
                csrfStatus.textContent = 'FOUND';
                csrfStatus.className = 'text-success';
            } else {
                csrfStatus.textContent = 'NOT FOUND';
                csrfStatus.className = 'text-danger';
            }
            
            console.log('Debug info updated');
        });
        
        function testAjax() {
            console.log('Testing AJAX...');
            
            fetch('/admin/quiz-generator/modules/1', {
                method: 'GET',
                headers: {
                    'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]')?.getAttribute('content') || 'test'
                }
            })
            .then(response => {
                console.log('Response status:', response.status);
                return response.json();
            })
            .then(data => {
                console.log('Response data:', data);
                alert('AJAX test successful! Check console for details.');
            })
            .catch(error => {
                console.error('AJAX error:', error);
                alert('AJAX test failed! Check console for details.');
            });
        }
    </script>
</body>
</html>
