<!DOCTYPE html>
<html>
<head>
    <title>Board Passers Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>Board Passers Table Test</h2>
        
        <div class="card">
            <div class="card-header">
                <h5>Board Exam Passers</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Student</th>
                                <th>Program</th>
                                <th>Board Exam</th>
                                <th>Result</th>
                                <th>Year</th>
                            </tr>
                        </thead>
                        <tbody id="boardPassersTable">
                            <tr><td colspan="5" class="text-center text-muted">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <button class="btn btn-primary mt-3" onclick="testUpdate()">Test Update</button>
    </div>

    <script>
        function updateBoardPassersTable(data) {
            console.log('updateBoardPassersTable called with data:', data);
            
            const tbody = document.getElementById('boardPassersTable');
            if (!tbody) {
                console.warn('boardPassersTable element not found');
                return;
            }
            
            console.log('Found boardPassersTable element, updating...');
            tbody.innerHTML = '';
            
            if (data && data.length > 0) {
                console.log('Processing', data.length, 'board passers');
                data.forEach((passer, index) => {
                    console.log('Processing passer', index + 1, ':', passer);
                    const row = document.createElement('tr');
                    const resultBadge = passer.result === 'PASS' ? 'bg-success' : 'bg-danger';
                    row.innerHTML = `
                        <td>
                            <div class="fw-bold">${passer.full_name || passer.student_name || 'Unknown'}</div>
                            <small class="text-muted">${passer.student_id || ''}</small>
                        </td>
                        <td><span class="badge bg-info">${passer.program_name || passer.program || 'N/A'}</span></td>
                        <td><span class="badge bg-secondary">${passer.board_exam || 'N/A'}</span></td>
                        <td><span class="badge ${resultBadge}">${passer.result || 'N/A'}</span></td>
                        <td><small>${passer.exam_year || 'N/A'}</small></td>
                    `;
                    tbody.appendChild(row);
                });
                console.log('Board passers table updated successfully');
            } else {
                console.log('No board passers data, showing empty message');
                tbody.innerHTML = '<tr><td colspan="5" class="text-center text-muted">No board passer data</td></tr>';
            }
        }
        
        function testUpdate() {
            // Test with the same data structure as the backend returns
            const testData = [
                {
                    student_id: '2025-07-00001',
                    full_name: 'Vince Michael Dela Vega',
                    program_name: 'Nursing',
                    board_exam: 'CPA',
                    exam_date: 'Jul 31, 2025',
                    exam_year: '2025',
                    result: 'PASS',
                    rating: 'N/A'
                },
                {
                    student_id: '2025-07-00002',
                    full_name: 'John Doe',
                    program_name: 'Engineering',
                    board_exam: 'CE',
                    exam_date: 'Jul 30, 2025',
                    exam_year: '2025',
                    result: 'FAIL',
                    rating: 'N/A'
                }
            ];
            
            console.log('Testing with data:', testData);
            updateBoardPassersTable(testData);
        }
        
        // Test on page load
        window.onload = function() {
            console.log('Page loaded, testing board passers table...');
            testUpdate();
        };
    </script>
</body>
</html> 