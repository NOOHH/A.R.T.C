<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Generator Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        button { padding: 8px 15px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>A.R.T.C Quiz Generator System Test</h1>
    
    <div class="test-section">
        <h2>1. Route Test</h2>
        <p id="route-test" class="info">Testing routes...</p>
        <button onclick="testRoutes()">Test Routes</button>
    </div>
    
    <div class="test-section">
        <h2>2. Batch Loading Test</h2>
        <p id="batch-test" class="info">Testing batch loading...</p>
        <button onclick="testBatchLoading()">Test Batch Loading</button>
    </div>
    
    <div class="test-section">
        <h2>3. Database Test</h2>
        <p id="db-test" class="info">Testing database connections...</p>
        <button onclick="testDatabase()">Test Database</button>
    </div>
    
    <div class="test-section">
        <h2>4. Quiz Generation Test</h2>
        <p id="quiz-test" class="info">Ready to test quiz generation...</p>
        <button onclick="testQuizGeneration()">Test Quiz Generation</button>
    </div>

    <script>
        async function testRoutes() {
            const routes = [
                '/admin/quiz-generator',
                '/admin/programs/1/batches',
                '/student/dashboard'
            ];
            
            const results = [];
            for (const route of routes) {
                try {
                    const response = await fetch(route);
                    results.push(`${route}: ${response.status === 200 ? 'OK' : 'Error ' + response.status}`);
                } catch (error) {
                    results.push(`${route}: Error - ${error.message}`);
                }
            }
            
            document.getElementById('route-test').innerHTML = `
                <div class="success">Route Test Results:</div>
                ${results.map(r => `<div>${r}</div>`).join('')}
            `;
        }
        
        async function testBatchLoading() {
            try {
                const response = await fetch('/admin/programs/1/batches');
                const data = await response.json();
                
                document.getElementById('batch-test').innerHTML = `
                    <div class="success">Batch Loading: Success</div>
                    <div>Response: ${JSON.stringify(data, null, 2)}</div>
                `;
            } catch (error) {
                document.getElementById('batch-test').innerHTML = `
                    <div class="error">Batch Loading: Error - ${error.message}</div>
                `;
            }
        }
        
        function testDatabase() {
            // This would need to be implemented as a backend endpoint
            document.getElementById('db-test').innerHTML = `
                <div class="info">Database test would need backend endpoint</div>
                <div>Tables needed: quizzes, quiz_questions, deadlines, student_batches</div>
            `;
        }
        
        function testQuizGeneration() {
            document.getElementById('quiz-test').innerHTML = `
                <div class="info">To test quiz generation:</div>
                <div>1. Go to <a href="/admin/quiz-generator" target="_blank">/admin/quiz-generator</a></div>
                <div>2. Select a program (should populate batch dropdown)</div>
                <div>3. Upload a document</div>
                <div>4. Fill in quiz details</div>
                <div>5. Generate quiz</div>
                <div>6. Check student dashboard for deadline</div>
            `;
        }
        
        // Auto-run basic tests
        window.onload = function() {
            testRoutes();
            setTimeout(testBatchLoading, 1000);
        };
    </script>
</body>
</html>
